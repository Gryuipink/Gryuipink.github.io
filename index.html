<html>  
<head>  
<title>Gryui_pink's website</title>  
</head> 
<body> 
<div class="music163" data-id="22636729" data-size="big" data-type="" data-width="" data-height="" title="" data-float=""></div><script>
window.RLQ.push(async function() {
    var types = ['playlist', 'album', 'song', 'program', 'djradio'];
    var reg = $('.music163').toArray();
    for (let i = 0; i < reg.length; i++) {
        var that = reg[i];
        var self = $(that);
        var id = that.dataset.id,
            size = that.dataset.size === 'small' ? 'small' : 'big',
            type = that.dataset.type,
            title = that.dataset.title,
            float = that.dataset.float,
            width = parseInt(that.dataset.width),
            height = parseInt(that.dataset.height);
        var height_type;
        //检测ID是否合法（纯数字），不合法则抛出异常。
        if (!/^\d+$/.test(id)) return self.css('color', 'red').text('Error in widget:Music163: Invalid id.');
        //检测宽度是否合法（纯数字、260 < width < 510），不合法则使用默认值。
        if (isNaN(width) || width < 260 || width > 510) width = size === 'small' ? 278 : 310;
        //检测类型是否合法（在类型表内），合法则替换为类型下标，不合法则使用默认值。
        if (types.includes(type)) type = types.indexOf(type);
        else if (!/^\d+$/.test(type) || !types[+type]) type = '2';
        //检测浮动类型是否合法，若不为left或right则设定为none
        if (!['left', 'right'].includes(float)) float = 'none';
        //检测高度是否合法：
        // 1、如果是单曲类，高度为固定值，高度类型为固定值减去20；
        if (['2', '3'].includes(type)) {
            height = size === 'small' ? 52 : 86;
            height_type = height - 20;
        }
        // 2、如果是列表类，小播放器的高度为固定值，高度类型为固定值减去20；
        else if (size === 'small') {
            height = 110;
            height_type = height - 20;
        }
        // 3、大播放器的高度如果不合法则使用默认值，高度类型为默认值减去20；
        else if (isNaN(width) || width < 210 || width > 520) {
            height = size === 'small' ? 110 : 450;
            height_type = height - 20;
        }
        // 4、如果合法则高度类型为固定值。
        else height_type = 430;
        self.empty().append('<iframe src="//music.163.com/outchain/player?type=' + type + '&id=' + id + '&auto=0&height=' + height_type + '" style="width: ' + width + 'px; height: ' + height + 'px;"></iframe><a rel="nofollow noreferrer noopener" class="external text" href="https://music.163.com/#/' + types[+type] + '?id=' + id + '" target="_blank"><img src="https://s1.music.126.net/music.ico"></a>').attr('title', (that.title || 'id ' + id) + ' - 网易云音乐');
        if (float !== 'none') self.addClass('float-' + float);
        await new Promise((res) => self.find('iframe')[0].addEventListener('load', res));
    };
});
</script>
</body> 
</html> 
